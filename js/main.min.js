"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}gsap.registerPlugin(ScrollTrigger,SplitText,Flip),ScrollTrigger.normalizeScroll({type:"touch"});var _OverlayScrollbarsGlo=OverlayScrollbarsGlobal,OverlayScrollbars=_OverlayScrollbarsGlo.OverlayScrollbars,nextContainer=null,galleryResizeHandler=null,gsapInstances=[];function initBarba(){barba.hooks.afterEnter((function(e){setTimeout((function(){$(window).scrollTop(0)}),100)})),barba.init({transitions:[{name:"page-transition",sync:!0,leave:function(e){window.lenis.stop(),document.querySelectorAll(".js-video-block iframe").forEach((function(e){e.remove()}));var t=gsap.timeline(),n=$(e.current.container),o=n.find(".js-background-shapes"),r=n.find(".js-content-holder");return t.to(o[0],{duration:1,opacity:0,ease:"expo.out"}).to(r[0],{duration:2,opacity:0,y:"-100vh",ease:"expo.out"},"-=1"),t},enter:function(e){var t=gsap.timeline(),n=$(e.next.container),o=n.find(".js-background-shapes"),r=n.find(".js-content-holder"),a=$(e.current.container).find(".js-background-noise-overlay");return t.set(a[0],{opacity:0}).set(n[0],{position:"fixed",top:0,left:0,width:"100%"}).set(o[0],{opacity:0}).set(r[0],{opacity:0,yPercent:150,transformOrigin:"center center"}).call((function(){$(".js-header").removeClass("active")})).to(o[0],{duration:1,opacity:1,ease:"power4.out"}).to(r[0],{duration:2,opacity:1,yPercent:0,ease:"power4.out",clearProps:"all"},"-=1").call((function(){gsap.set(n[0],{clearProps:"all"}),window.lenis.scrollTo(0,{immediate:!0,force:!0,lock:!0}),window.lenis.start(),setTimeout((function(){ScrollTrigger.refresh()}),0)})),t}}]})}function initSmoothScrolling(){var e=new Lenis({lerp:.1,smoothWheel:!0});window.lenis=e,e.on("scroll",(function(){ScrollTrigger.update})),gsap.ticker.add((function(t){e.raf(1e3*t)})),gsap.ticker.lagSmoothing(0)}function initPreloader(){var e=$(".js-preloader"),t=e.find(".js-preloader-logo-overlay"),n=$(".js-content-holder"),o=gsap.timeline();o.fromTo(n,{opacity:0,y:500},{duration:1.5,opacity:1,y:0,ease:"power3.out",clearProps:"all"});var r=gsap.timeline();r.eventCallback("onStart",(function(){window.lenis.stop()})),r.eventCallback("onComplete",(function(){$(".js-gallery").length&&window.dispatchEvent(new Event("resize")),ScrollTrigger.refresh()})),r.to(t,{duration:3,height:"100%",ease:"power4.out"},1).to(e,{duration:.5,height:0,ease:"expoScale(0.5,7,none)"},"-=1").call((function(){window.lenis.start()})).add(o,"-=1")}function initTranslations(){var e=$(".js-language-switcher");function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?"".concat(n,".").concat(r):r;"object"===_typeof(e[r])&&null!==e[r]?Object.assign(o,t(e[r],a)):o[a]=e[r]}return o}var n=Object.keys(window.translations).reduce((function(e,n){return e[n]=t(window.translations[n]),e}),{});function o(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new URL(window.location.href);r.searchParams.set("lang",t),n&&barba.history.add(r.toString(),"barba","push"),o&&barba.history.add(r.toString(),"barba","replace"),function(t){var n=Object.keys(window.translations).findIndex((function(e){return e===t}))+1;e.attr("data-active-lang",n),e.find(".js-language-switcher-btn").removeClass("active").eq(n-1).addClass("active")}(t),localStorage.setItem("locale",t),ScrollTrigger.getAll().forEach((function(e){return e.kill()})),gsapInstances.forEach((function(e){return e.revert()})),gsapInstances=[],function(e){$.i18n().locale=e,$("body").i18n()}(t),initAnimationMarquee(),initAnimationGallery(),initAnimationBlurText(),initAnimationSlideUpText(),initAnimationSkewText()}$.i18n().load(n).done((function(){barba.hooks.beforeEnter((function(e){nextContainer=e.next.container,initScripts(),o(function(){var e=new URLSearchParams(window.location.search).get("lang"),t=localStorage.getItem("locale"),n=$("html").attr("lang"),o=e||t;return null===o&&(localStorage.setItem("locale",n),o=n),e&&localStorage.setItem("locale",e),o}(),!1,!0)})),e.on("click",".js-language-switcher-btn",(function(e){e.preventDefault(),o($(this).data("locale"))}))}))}function initActiveHeaderAfterScroll(){var e=$(".js-header");$(window).on("scroll",(function(){$(this).scrollTop()>10?e.addClass("active"):e.removeClass("active")})),$(document).scrollTop()>10&&e.addClass("active")}function initOverlayScrollbars(){OverlayScrollbars(document.body,{})}function initCurrentYear(){var e=(new Date).getFullYear(),t=document.querySelector(".js-current-year");t&&(t.textContent=e)}function initLazyLoad(){new LazyLoad({elements_selector:".js-lazy",threshold:0})}function initPortfolioTitleLastLetter(){var e=function(){var e=$(nextContainer).find(".js-portfolio-title-last-letter"),t=e.outerWidth()/2;e.css("margin-right","-".concat(t+.5,"px"))};e(),window.addEventListener("resize",e())}function initVideoBlock(){var e=$(nextContainer).find(".js-video-block");e.length&&e.each((function(){var e,t=$(this),n=$(this).find(".js-video-btn");t[0].addEventListener("mousemove",(function(e){gsap.to(n[0],.25,{css:{left:e.clientX,top:e.clientY}})})),t[0].addEventListener("mouseover",(function(){gsap.to(n[0],.25,{scale:1,autoAlpha:1})})),t[0].addEventListener("mouseout",(function(){gsap.to(n[0],.25,{scale:.5,autoAlpha:0})})),t[0].addEventListener("mousedown",(function(){gsap.to(n[0],.5,{css:{transform:"translate(-50%, -50%) scale(0.75)"}})})),t[0].addEventListener("mouseup",(function(){gsap.to(n[0],.5,{css:{transform:"translate(-50%, -50%) scale(1)"}})})),(e=t).on("click",(function(){if(!$(this).hasClass("active")){e.addClass("active");var t=$('<iframe class="video-block__media" allowfullscreen></iframe>');t.attr("allow","autoplay"),t.attr("src","https://www.youtube.com/embed/"+function(e){var t=e.attr("data-video").match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#?]*).*/);return t&&11===t[2].length?t[2]:null}($(this))+"?rel=0&showinfo=0&autoplay=1&controls=0&rel=0&modestbranding=1?enablejsapi=1"),$(this).find(".js-video-block-media").remove(),$(this).append(t)}}))}))}function initAnimationMarquee(){var e=$(nextContainer).find(".js-marquee");if(e.length)e.marquee({speed:50,gap:200,delayBeforeStart:0,direction:"left",duplicated:!0,startVisible:!0})}function initAnimationGallery(){var e=[],t=function(){var t=nextContainer.querySelectorAll(".js-gallery");t.length&&(e.forEach((function(e){return e&&e.revert()})),e=[],t.forEach((function(t,n){var o=t.querySelectorAll(".js-gallery-item"),r=t.querySelectorAll(".js-gallery-item-center-text"),a=gsap.context((function(){t.classList.add("switch");var e=Flip.getState([o],{props:"opacity",simple:!0});return t.classList.remove("switch"),r.length&&gsap.to(r,{transform:"translateX(0)",ease:"none",scrollTrigger:{trigger:t,start:"center center",end:"+=250%",scrub:!0,invalidateOnRefresh:!0}}),Flip.to(e,{ease:"none",absoluteOnLeave:!0,absolute:!1,scale:!1,simple:!0,stagger:0,scrollTrigger:{trigger:t,start:"center center",end:"+=250%",pin:t.parentNode,scrub:!0,invalidateOnRefresh:!0}}),function(){gsap.set(o,{clearProps:"all"}),gsap.set(r,{clearProps:"all"})}}));e[n]=a,gsapInstances.push(a)})))};t(),galleryResizeHandler&&window.removeEventListener("resize",galleryResizeHandler),galleryResizeHandler=function(){t(),requestAnimationFrame((function(){ScrollTrigger.getAll().forEach((function(e){e.trigger&&e.trigger.classList.contains("js-gallery")||e.refresh()}))}))},window.addEventListener("resize",galleryResizeHandler)}function waitForFonts(){return new Promise((function(e){document.fonts&&document.fonts.ready?document.fonts.ready.then(e):e()}))}function initAnimationBlurText(){var e=nextContainer.querySelectorAll(".js-blur-scroll-effect");e.length&&waitForFonts().then((function(){e.forEach((function(e){var t=new SplitText(e,{type:"words"}),n=t.words;gsapInstances.push(t),gsap.set(n,{opacity:0,skewX:-20,willChange:"filter, transform",filter:"blur(8px)"}),gsap.fromTo(n,{opacity:0,skewX:-20,willChange:"filter, transform",filter:"blur(8px)"},{ease:"sine",opacity:1,skewX:0,filter:"blur(0px)",stagger:.04,scrollTrigger:{trigger:e,start:"top bottom-=15%",end:"bottom center+=15%",scrub:!0,invalidateOnRefresh:!0}})}))}))}function initAnimationSlideUpText(){var e=nextContainer.querySelectorAll(".js-slide-up-text");e&&waitForFonts().then((function(){e.forEach((function(e){var t=new SplitText(e,{type:"lines, words, chars",mask:"chars",charsClass:"char"}),n=t.chars;gsapInstances.push(t),gsap.set(n,{y:"120%"}),gsap.to(n,{y:0,stagger:.1,duration:.4,ease:"power2.out",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",toggleActions:"play reset restart reset",invalidateOnRefresh:!0}})}))}))}function initAnimationSkewText(){var e=nextContainer.querySelectorAll(".js-skew-text");e&&e.forEach((function(e){gsap.fromTo(e,{x:-100,opacity:0,skewX:40,ease:"power2.out"},{x:0,opacity:1,skewX:0,duration:1,ease:"power2.out",scrollTrigger:{trigger:e,start:"bottom-=100 bottom",end:"top 30%",scrub:!0,invalidateOnRefresh:!0}})}))}function initAnimationParallax(){var e=$(nextContainer).find(".js-parallax-scene");e.length&&e.each((function(){new Parallax(this,{selector:".js-parallax-item",pointerEvents:!0})}))}function initGlobalScripts(){initSmoothScrolling(),initPreloader(),initTranslations(),initActiveHeaderAfterScroll(),initOverlayScrollbars(),initCurrentYear()}function initScripts(){initLazyLoad(),initPortfolioTitleLastLetter(),initVideoBlock(),initAnimationParallax()}history.scrollRestoration&&(history.scrollRestoration="manual"),$(window).on("unload",(function(){$(window).scrollTop(0)})),jQuery,initGlobalScripts(),initBarba();